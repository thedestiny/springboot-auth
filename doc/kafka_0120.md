

```

kafka 
Rebalance 的触发本质是 「消费组的状态一致性被打破」，具体可分为三大类触发场景，
覆盖「成员变化、元数据变化、配置变化」全维度

消费者下线 心跳超时 消费超时
消费者源数据发送变化，分区扩容
消费者

所有消费者停止拉取和处理消息，主动释放持有的分区所有权；

Coordinator 需完成「成员状态确认→分区重新分配→新分配方案同步」的全流程，这个过程短则几百毫秒，长则数秒（取决于消费组规模和 Broker 负载
避免消息重复消费

在需要「批量处理 + 事务提交」的场景下（比如批量写入数据库、批量更新缓存），Rebalance 会强制中断正在执行的长事务


```
